<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Isaac Qi - Research Dashboard</title>
    <link rel="stylesheet" href="rstudio-styles.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-cow"></i>
                <span>Isaac Qi</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                </li>
                <li class="nav-item">
                    <a>Research Dashboard</a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- RStudio-like Interface -->
    <div class="rstudio-container">
        <!-- Top Menu Bar -->
        <div class="menu-bar">
            <div class="menu-left">
                <span class="menu-item">RStudio</span>
                <span class="menu-item">File</span>
                <span class="menu-item">Edit</span>
                <span class="menu-item">Code</span>
                <span class="menu-item">View</span>
                <span class="menu-item">Plots</span>
                <span class="menu-item">Session</span>
                <span class="menu-item">Build</span>
                <span class="menu-item">Debug</span>
                <span class="menu-item">Profile</span>
                <span class="menu-item">Tools</span>
                <span class="menu-item">Window</span>
                <span class="menu-item">Help</span>
            </div>
            <div class="menu-right">
                <span class="window-title"></span>
                <div class="window-controls">
                    <div class="control-btn maximize"></div>
                    <div class="control-btn minimize"></div>
                    <div class="control-btn close"></div>
                </div>
            </div>
        </div>

        <!-- Toolbar -->
        <div class="toolbar">
            <button class="tool-btn" title="New File"><i class="fas fa-file"></i></button>
            <button class="tool-btn" title="Open File"><i class="fas fa-folder-open"></i></button>
            <button class="tool-btn" title="Save"><i class="fas fa-save"></i></button>
            <div class="tool-separator"></div>
            <button class="tool-btn" title="Undo"><i class="fas fa-undo"></i></button>
            <button class="tool-btn" title="Redo"><i class="fas fa-redo"></i></button>
            <div class="tool-separator"></div>
            <button class="tool-btn" title="Run"><i class="fas fa-play"></i></button>
            <button class="tool-btn" title="Source"><i class="fas fa-code"></i></button>
            <div class="tool-separator"></div>
            <input type="text" placeholder="Go to file/function" class="search-input">
            <div class="tool-separator"></div>
            <select class="addins-dropdown">
                <option>Addins</option>
            </select>
        </div>

        <!-- Main Panes Container -->
        <div class="panes-container" id="panes-container">
            <!-- Resize handles -->
            <div class="resize-handle vertical" id="vertical-handle"></div>
            
            <!-- Left Column -->
            <div class="left-column" id="left-column">
                <div class="resize-handle horizontal-left" id="horizontal-left-handle"></div>
                <!-- Top Left: Cow Petting Game -->
                <div class="pane game-pane">
                <div class="pane-header">
                    <div class="pane-tabs">
                        <div class="tab active" data-tab="cow-gallery">
                            <i class="fas fa-images"></i>
                            <span>Cow Gallery</span>
                            <i class="fas fa-times"></i>
                        </div>
                        <div class="tab" data-tab="feed-a-cow">
                            <i class="fas fa-cow"></i>
                            <span>Feed a Cow!</span>
                            <i class="fas fa-times"></i>
                        </div>
                        <div class="tab" data-tab="cow-welfare-analysis">
                            <i class="fas fa-code"></i>
                            <span>cow_welfare_analysis.R</span>
                            <i class="fas fa-times"></i>
                        </div>
                        <div class="tab" data-tab="data-visualization">
                            <i class="fas fa-chart-bar"></i>
                            <span>data_visualization.R</span>
                            <i class="fas fa-times"></i>
                        </div>
                        <div class="tab" data-tab="statistical-models">
                            <i class="fas fa-calculator"></i>
                            <span>statistical_models.R</span>
                            <i class="fas fa-times"></i>
                        </div>
                    </div>
                    <div class="pane-toolbar">
                        <button class="pane-btn" title="Source on Save">
                            <i class="fas fa-check-square"></i>
                        </button>
                        <button class="pane-btn run-btn" title="Run">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="pane-btn" title="Source">
                            <i class="fas fa-code"></i>
                        </button>
                    </div>
                </div>
                <div class="pane-content">
                    <!-- Cow Gallery Content -->
                    <div class="cow-gallery-container" id="cow-gallery-container">
                        <div class="gallery-header">
                            <h3>Cows I've Met</h3>
                            <div class="gallery-counter">
                                <span id="current-cow">1</span> / <span id="total-cows">8</span>
                            </div>
                        </div>
                        <div class="gallery-navigation">
                            <button class="nav-btn prev-btn" id="prev-cow">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <div class="cow-display">
                                <div class="cow-image-container">
                                    <img id="cow-image" src="" alt="Cow" class="cow-image">
                                </div>
                                <div class="cow-info">
                                    <h4 id="cow-name">Loading...</h4>
                                    <div class="cow-details">
                                        <div class="detail-item">
                                            <span class="detail-label">Breed:</span>
                                            <span id="cow-breed">-</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Location:</span>
                                            <span id="cow-location">-</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Date Met:</span>
                                            <span id="cow-date">-</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="cow-story">
                                    <div class="story-label">Story:</div>
                                    <div class="story-content" id="cow-story">Loading...</div>
                                </div>
                            </div>
                            <button class="nav-btn next-btn" id="next-cow">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <div class="gallery-dots" id="gallery-dots">
                            <!-- Dots will be generated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Game Content -->
                    <div class="game-container" id="game-container" style="display: none;">
                        <div class="game-header">
                            <div class="game-stats">
                                <div class="stat">
                                    <span class="stat-label">Score:</span>
                                    <span class="stat-value" id="score">0</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-label">Time:</span>
                                    <span class="stat-value" id="timer">30</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-label">High Score:</span>
                                    <span class="stat-value" id="high-score">0</span>
                                </div>
                            </div>
                            <div class="game-controls">
                                <button class="game-btn" id="start-btn">Start Game</button>
                                <button class="game-btn" id="reset-btn">Reset</button>
                            </div>
                        </div>
                        <div class="game-board" id="game-board">
                            <div class="cow-hole" data-hole="0"></div>
                            <div class="cow-hole" data-hole="1"></div>
                            <div class="cow-hole" data-hole="2"></div>
                            <div class="cow-hole" data-hole="3"></div>
                            <div class="cow-hole" data-hole="4"></div>
                            <div class="cow-hole" data-hole="5"></div>
                            <div class="cow-hole" data-hole="6"></div>
                            <div class="cow-hole" data-hole="7"></div>
                            <div class="cow-hole" data-hole="8"></div>
                        </div>
                        <div class="game-instructions">
                            <p>üêÑ Feed the cows as they appear! Each cow is worth 10 points.</p>
                            <p>‚è∞ You have 30 seconds to feed as many cows as possible!</p>
                        </div>
                    </div>
                    
                    <!-- Hidden Code Editors (for other tabs) -->
                    <div class="code-editor" id="cow-welfare-analysis" style="display: none;">
                        <div class="line-numbers">
                            <div class="line-number">1</div>
                            <div class="line-number">2</div>
                            <div class="line-number">3</div>
                            <div class="line-number">4</div>
                            <div class="line-number">5</div>
                            <div class="line-number">6</div>
                            <div class="line-number">7</div>
                            <div class="line-number">8</div>
                            <div class="line-number">9</div>
                            <div class="line-number">10</div>
                            <div class="line-number">11</div>
                            <div class="line-number">12</div>
                            <div class="line-number">13</div>
                            <div class="line-number">14</div>
                            <div class="line-number">15</div>
                            <div class="line-number">16</div>
                            <div class="line-number">17</div>
                            <div class="line-number">18</div>
                            <div class="line-number">19</div>
                            <div class="line-number">20</div>
                        </div>
                        <div class="code-content editable" contenteditable="true" spellcheck="false">
                            <div class="code-line"><span class="comment"># AMS x PRT Research Analysis</span></div>
                            <div class="code-line"><span class="comment"># Automated Milking System & Positive Reinforcement Training</span></div>
                            <div class="code-line"><span class="comment"># Isaac Qi - UBC Animal Welfare Program</span></div>
                            <div class="code-line"></div>
                            <div class="code-line"><span class="keyword">library</span>(<span class="string">"dplyr"</span>)</div>
                            <div class="code-line"><span class="keyword">library</span>(<span class="string">"ggplot2"</span>)</div>
                            <div class="code-line"><span class="keyword">library</span>(<span class="string">"lme4"</span>)</div>
                            <div class="code-line"><span class="keyword">library</span>(<span class="string">"lmerTest"</span>)</div>
                            <div class="code-line"></div>
                            <div class="code-line"><span class="comment"># Load processed AMS data</span></div>
                            <div class="code-line">max_step_MVI <- <span class="keyword">read_csv</span>(<span class="string">"data/processed/02_outliers_removed.csv"</span>)</div>
                            <div class="code-line"></div>
                            <div class="code-line"><span class="comment"># Mixed effects model for visit intervals</span></div>
                            <div class="code-line">model <- <span class="keyword">lmer</span>(</div>
                            <div class="code-line">  max_interval ~ study_day + max_step_score +</div>
                            <div class="code-line">    parity_group + max_interval_lag1 + pen +</div>
                            <div class="code-line">    (<span class="number">1</span> | cow_id),</div>
                            <div class="code-line">  data = max_step_MVI, REML = <span class="keyword">TRUE</span></div>
                            <div class="code-line">)</div>
                            <div class="code-line"></div>
                            <div class="code-line"><span class="comment"># Model diagnostics and results</span></div>
                            <div class="code-line"><span class="keyword">summary</span>(model)</div>
                            <div class="code-line"><span class="keyword">anova</span>(model, type = <span class="number">3</span>)</div>
                        </div>
                    </div>
                    
                    <div class="code-editor" id="data-visualization" style="display: none;">
                        <div class="line-numbers">
                            <div class="line-number">1</div>
                            <div class="line-number">2</div>
                            <div class="line-number">3</div>
                            <div class="line-number">4</div>
                            <div class="line-number">5</div>
                            <div class="line-number">6</div>
                            <div class="line-number">7</div>
                            <div class="line-number">8</div>
                            <div class="line-number">9</div>
                            <div class="line-number">10</div>
                            <div class="line-number">11</div>
                            <div class="line-number">12</div>
                            <div class="line-number">13</div>
                            <div class="line-number">14</div>
                            <div class="line-number">15</div>
                            <div class="line-number">16</div>
                            <div class="line-number">17</div>
                            <div class="line-number">18</div>
                            <div class="line-number">19</div>
                            <div class="line-number">20</div>
                        </div>
                        <div class="code-content editable" contenteditable="true" spellcheck="false">
                            <div class="code-line"><span class="comment"># AMS Visit Interval Visualization</span></div>
                            <div class="code-line"><span class="comment"># Treatment vs Control Comparison</span></div>
                            <div class="code-line"></div>
                            <div class="code-line"><span class="keyword">library</span>(<span class="string">"ggplot2"</span>)</div>
                            <div class="code-line"><span class="keyword">library</span>(<span class="string">"emmeans"</span>)</div>
                            <div class="code-line"></div>
                            <div class="code-line"><span class="comment"># Load weekly aggregated data</span></div>
                            <div class="code-line">pen2_weekly <- daily_means %>%</div>
                            <div class="code-line">  <span class="keyword">filter</span>(pen == <span class="number">2</span>) %>%</div>
                            <div class="code-line">  <span class="keyword">mutate</span>(</div>
                            <div class="code-line">    week = <span class="keyword">case_when</span>(</div>
                            <div class="code-line">      day %in% <span class="number">1</span>:<span class="number">7</span>   ~ <span class="string">"Week 1"</span>,</div>
                            <div class="code-line">      day %in% <span class="number">8</span>:<span class="number">14</span>  ~ <span class="string">"Week 2"</span>,</div>
                            <div class="code-line">      day %in% <span class="number">15</span>:<span class="number">21</span> ~ <span class="string">"Week 3"</span>,</div>
                            <div class="code-line">      day %in% <span class="number">22</span>:<span class="number">28</span> ~ <span class="string">"Week 4"</span></div>
                            <div class="code-line">    )</div>
                            <div class="code-line">  )</div>
                            <div class="code-line"></div>
                            <div class="code-line"><span class="comment"># Mixed-effects model for weekly analysis</span></div>
                            <div class="code-line">fit <- <span class="keyword">lmer</span>(</div>
                            <div class="code-line">  avg_max_interval ~ treatment * week + (<span class="number">1</span> | cow_id),</div>
                            <div class="code-line">  data = pen2_weekly, REML = <span class="keyword">TRUE</span></div>
                            <div class="code-line">)</div>
                            <div class="code-line"></div>
                            <div class="code-line"><span class="comment"># Create violin plot with statistical labels</span></div>
                            <div class="code-line">fig_1 <- <span class="keyword">ggplot</span>(pen2_weekly, <span class="keyword">aes</span>(x = week, y = avg_max_interval)) +</div>
                            <div class="code-line">  <span class="keyword">geom_violin</span>(<span class="keyword">aes</span>(fill = treatment), alpha = <span class="number">0.3</span>) +</div>
                            <div class="code-line">  <span class="keyword">geom_point</span>(<span class="keyword">aes</span>(color = treatment), position = <span class="string">"jitter"</span>) +</div>
                            <div class="code-line">  <span class="keyword">labs</span>(title = <span class="string">"AMS Visit Intervals by Treatment"</span>)</div>
                        </div>
                    </div>
                    
                    <div class="code-editor" id="statistical-models" style="display: none;">
                        <div class="line-numbers">
                            <div class="line-number">1</div>
                            <div class="line-number">2</div>
                            <div class="line-number">3</div>
                            <div class="line-number">4</div>
                            <div class="line-number">5</div>
                            <div class="line-number">6</div>
                            <div class="line-number">7</div>
                            <div class="line-number">8</div>
                            <div class="line-number">9</div>
                            <div class="line-number">10</div>
                            <div class="line-number">11</div>
                            <div class="line-number">12</div>
                            <div class="line-number">13</div>
                            <div class="line-number">14</div>
                            <div class="line-number">15</div>
                            <div class="line-number">16</div>
                            <div class="line-number">17</div>
                            <div class="line-number">18</div>
                            <div class="line-number">19</div>
                            <div class="line-number">20</div>
                        </div>
                        <div class="code-content editable" contenteditable="true" spellcheck="false">
                            <div class="code-line"><span class="comment"># Statistical Model Diagnostics</span></div>
                            <div class="code-line"><span class="comment"># Mixed Effects Model Validation</span></div>
                            <div class="code-line"></div>
                            <div class="code-line"><span class="keyword">library</span>(<span class="string">"lme4"</span>)</div>
                            <div class="code-line"><span class="keyword">library</span>(<span class="string">"MuMIn"</span>)</div>
                            <div class="code-line"></div>
                            <div class="code-line"><span class="comment"># Model diagnostics plots</span></div>
                            <div class="code-line"><span class="keyword">par</span>(mfrow = <span class="keyword">c</span>(<span class="number">2</span>, <span class="number">2</span>))</div>
                            <div class="code-line"></div>
                            <div class="code-line"><span class="comment"># Residuals vs Fitted</span></div>
                            <div class="code-line"><span class="keyword">plot</span>(<span class="keyword">fitted</span>(model), <span class="keyword">resid</span>(model),</div>
                            <div class="code-line">     main = <span class="string">"Residuals vs Fitted"</span>,</div>
                            <div class="code-line">     xlab = <span class="string">"Fitted values"</span>, ylab = <span class="string">"Residuals"</span>)</div>
                            <div class="code-line"><span class="keyword">abline</span>(h = <span class="number">0</span>, lty = <span class="number">2</span>)</div>
                            <div class="code-line"></div>
                            <div class="code-line"><span class="comment"># Q-Q Plot</span></div>
                            <div class="code-line"><span class="keyword">qqnorm</span>(<span class="keyword">resid</span>(model), main = <span class="string">"Normal Q-Q: Residuals"</span>)</div>
                            <div class="code-line"><span class="keyword">qqline</span>(<span class="keyword">resid</span>(model))</div>
                            <div class="code-line"></div>
                            <div class="code-line"><span class="comment"># Model summary and R-squared</span></div>
                            <div class="code-line"><span class="keyword">r.squaredGLMM</span>(model)</div>
                        </div>
                    </div>
                </div>
                </div>

                <!-- Bottom Left: Console -->
                <div class="pane console-pane">
                <div class="pane-header">
                    <div class="pane-tabs">
                        <div class="tab active">Console</div>
                        <div class="tab">Terminal</div>
                        <div class="tab">Background Jobs</div>
                    </div>
                </div>
                <div class="pane-content">
                    <div class="console-output">
                        <div class="console-line">Copyright (C) 2024 The R Foundation for Statistical Computing</div>
                        <div class="console-line"></div>
                        <div class="console-line">R is free software and comes with ABSOLUTELY NO WARRANTY.</div>
                        <div class="console-line">You are welcome to redistribute it under certain conditions.</div>
                        <div class="console-line"></div>
                        <div class="console-line">> <span class="cursor">|</span></div>
                    </div>
                </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="right-column" id="right-column">
                <div class="resize-handle horizontal-right" id="horizontal-right-handle"></div>
                <!-- Top Right: Environment -->
                <div class="pane environment-pane">
                <div class="pane-header">
                    <div class="pane-tabs">
                        <div class="tab active">Environment</div>
                        <div class="tab">History</div>
                        <div class="tab">Connections</div>
                        <div class="tab">Tutorial</div>
                    </div>
                    <div class="pane-toolbar">
                        <button class="pane-btn" title="Import Dataset"><i class="fas fa-upload"></i></button>
                        <span class="memory-info">164 MiB</span>
                        <select class="list-dropdown">
                            <option>List</option>
                        </select>
                        <button class="pane-btn" title="Refresh"><i class="fas fa-sync"></i></button>
                    </div>
                </div>
                <div class="pane-content">
                    <div class="environment-content">
                        <div class="search-bar">
                            <input type="text" placeholder="Search objects...">
                        </div>
                        <div class="environment-objects">
                            <div class="object-item">
                                <span class="object-name">readme</span>
                                <span class="object-type">just.do.it</span>
                                <span class="object-size">1 √ó 1</span>
                            </div>
                            <div class="object-item">
                                <i class="fas fa-heart"></i>
                                <span class="object-name">mission</span>
                                <span class="object-type">character</span>
                                <span class="object-size">1 √ó 1</span>
                            </div>
                            <div class="object-item">
                                <i class="fas fa-graduation-cap"></i>
                                <span class="object-name">field_of_study</span>
                                <span class="object-type">character</span>
                                <span class="object-size">1 √ó 1</span>
                            </div>
                            <div class="object-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <span class="object-name">current_status</span>
                                <span class="object-type">character</span>
                                <span class="object-size">1 √ó 1</span>
                            </div>
                            <div class="object-item">
                                <i class="fas fa-database"></i>
                                <span class="object-name">daily_means</span>
                                <span class="object-type">data.frame</span>
                                <span class="object-size">1,247 √ó 8</span>
                            </div>
                            <div class="object-item">
                                <i class="fas fa-exchange-alt"></i>
                                <span class="object-name">regrouped_cows</span>
                                <span class="object-type">data.frame</span>
                                <span class="object-size">12 √ó 2</span>
                            </div>
                        </div>
                    </div>
                </div>
                </div>

                <!-- Bottom Right: Plots/Files -->
                <div class="pane plots-pane">
                <div class="pane-header">
                    <div class="pane-tabs">
                        <div class="tab active">Plots</div>
                        <div class="tab">Files</div>
                        <div class="tab">Packages</div>
                        <div class="tab">Help</div>
                        <div class="tab">Viewer</div>
                    </div>
                    <div class="pane-toolbar">
                        <button class="pane-btn" title="Previous"><i class="fas fa-chevron-left"></i></button>
                        <button class="pane-btn" title="Next"><i class="fas fa-chevron-right"></i></button>
                        <button class="pane-btn" title="Zoom"><i class="fas fa-search-plus"></i></button>
                        <select class="export-dropdown">
                            <option>Export</option>
                        </select>
                        <button class="pane-btn" title="Refresh"><i class="fas fa-sync"></i></button>
                    </div>
                </div>
                <div class="pane-content">
                    <div class="plots-content">
                        <div class="plot-container">
                            <canvas id="cowBehaviorChart" width="400" height="300"></canvas>
                        </div>
                        <div class="plot-info">
                            <h4>Positive Reinforcement Training in Dairy Cattle</h4>
                            <p>How does it influence welfare during AMS transitions?</p>
                            <div class="plot-stats">
                                <div class="stat-item">
                                    <span class="stat-label">Sample Size:</span>
                                    <span class="stat-value">181 Lactating Holstein Cows</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Treatment Groups:</span>
                                    <span class="stat-value">2 groups</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Duration:</span>
                                    <span class="stat-value">28 days</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>

    <script src="rstudio-script.js"></script>
</body>
</html>
